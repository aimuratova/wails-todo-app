(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function d(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=d(e);fetch(e.href,n)}})();function u(t){return window.go.backend.TodoService.AddTask(t)}function m(t){return window.go.backend.TodoService.DeleteTask(t)}function f(){return window.go.backend.TodoService.GetTasks()}function p(t){return window.go.backend.TodoService.ToggleDone(t)}function w(t,o){return window.go.backend.TodoService.UpdateTask(t,o)}async function a(){const t=await f(),o=document.getElementById("tasks");o.innerHTML="",t.forEach(d=>{const i=document.createElement("li");i.className=d.done?"done":"";const e=document.createElement("input");e.type="checkbox",e.checked=d.done,e.addEventListener("change",async()=>{await p(d.id),await a()});const n=document.createElement("div");n.className="task-text",n.textContent=d.text;const c=document.createElement("div");c.className="task-actions";const r=document.createElement("button");r.textContent="\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",r.addEventListener("click",async()=>{const l=prompt("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443",d.text);l!==null&&(await w(d.id,l),await a())});const s=document.createElement("button");s.textContent="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",s.addEventListener("click",async()=>{confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443?")&&(await m(d.id),await a())}),c.appendChild(r),c.appendChild(s),i.appendChild(e),i.appendChild(n),i.appendChild(c),o.appendChild(i)})}async function y(){document.getElementById("addBtn").addEventListener("click",async()=>{const t=document.getElementById("newTaskInput"),o=t.value.trim();!o||(await u(o),t.value="",await a())}),document.getElementById("newTaskInput").addEventListener("keydown",async t=>{t.key==="Enter"&&document.getElementById("addBtn").click()}),await a()}window.addEventListener("DOMContentLoaded",y);
